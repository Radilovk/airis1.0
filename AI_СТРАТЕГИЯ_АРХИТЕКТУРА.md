# AI –°—Ç—Ä–∞—Ç–µ–≥–∏—è - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –ê–Ω–∞–ª–∏–∑ –Ω–∞ –ò—Ä–∏—Å

## –û–±—â–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞—Ç–∞ AIRIS –∏–∑–ø–æ–ª–∑–≤–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç —Ä–∞–∑–ª–∏—á–Ω–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∏—Ä–∏–¥–æ–ª–æ–≥–∏—á–µ–Ω –∞–Ω–∞–ª–∏–∑. –í—Å–µ–∫–∏ –∏–∑—Ç–æ—á–Ω–∏–∫ –∏–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ —Ä–æ–ª—è –∏ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω —Å —Ä–∞–∑–ª–∏—á–Ω–æ —Ç–µ–≥–ª–æ (–ø—Ä–æ—Ü–µ–Ω—Ç) –≤ Admin –ø–∞–Ω–µ–ª–∞.

## –¢—Ä–∏ –û—Å–Ω–æ–≤–Ω–∏ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 1. –ò—Ä–∏–¥–æ–ª–æ–≥–∏—á–Ω–æ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ (Manual) üìö

**–†–æ–ª—è**: –°–ê–ú–û –∑–∞ –ò–î–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø –Ω–∞ –Ω–∞—Ö–æ–¥–∫–∏

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ**:
- **–¢–æ–ø–æ–≥—Ä–∞—Ñ—Å–∫–∞ –ª–æ–∫–∞—Ü–∏—è** - –æ–ø—Ä–µ–¥–µ–ª—è –ö–™–ê –≤ –∏—Ä–∏—Å–∞ —Å–µ –Ω–∞–º–∏—Ä–∞ –Ω–∞—Ö–æ–¥–∫–∞—Ç–∞ (–∫–æ—è—Ç–æ –∑–æ–Ω–∞, –∫–æ–π —á–∞—Å–æ–≤–Ω–∏–∫)
- **–¢–∏–ø –Ω–∞—Ö–æ–¥–∫–∞** - –æ–ø—Ä–µ–¥–µ–ª—è –ö–ê–ö–í–û –µ –Ω–∞—Ö–æ–¥–∫–∞—Ç–∞ (–ª–∞–∫—É–Ω–∞, –∫—Ä–∏–ø—Ç–∞, –ø–∏–≥–º–µ–Ω—Ç, —Ä–∞–¥–∏–∞–ª–Ω–∞ –ª–∏–Ω–∏—è –∏ –¥—Ä.)
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ** - –æ–ø—Ä–µ–¥–µ–ª—è —Å –ö–û–ò –û–†–ì–ê–ù–ò –ò –°–ò–°–¢–ï–ú–ò —Å–∞ —Å–≤—ä—Ä–∑–∞–Ω–∏ –Ω–∞—Ö–æ–¥–∫–∏—Ç–µ

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏**:
- –°—ä—Ö—Ä–∞–Ω—è–≤–∞ —Å–µ –≤ KV storage –∫–∞—Ç–æ `iridology-manual`
- –†–∞–±–æ—Ç–∏ –∫–∞—Ç–æ RAG (Retrieval-Augmented Generation) –ø–∞–º–µ—Ç –ë–ï–ó –±–µ–∫–µ–Ω–¥
- –ú–æ–∂–µ –¥–∞ —Å–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç Admin –ø–∞–Ω–µ–ª–∞ (—Ç–∞–± "–ò—Ä–∏–¥–æ–ª–æ–≥–∏—á–Ω–æ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ")
- Default —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –µ –≤ `manual.json` –∏ `src/lib/default-prompts.ts`

**–ü—Ä–∏–º–µ—Ä**: –ü—Ä–∏ –Ω–∞—Ö–æ–¥–∫–∞ –≤ —Å–µ–∫—Ç–æ—Ä 4:00-5:00 –Ω–∞ –¥–µ—Å–Ω–∏—è –∏—Ä–∏—Å, —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ —É–∫–∞–∑–≤–∞:
```
–¢–æ–ø–æ–≥—Ä–∞—Ñ–∏—è: 4:00-5:00 (120-150¬∞) 
–û—Ä–≥–∞–Ω: –ß–µ—Ä–µ–Ω –¥—Ä–æ–±
–°–∏—Å—Ç–µ–º–∞: –î–µ—Ç–æ–∫—Å–∏–∫–∞—Ü–∏—è
–¢–∏–ø: –ü–∏–≥–º–µ–Ω—Ç–Ω–æ –ø–µ—Ç–Ω–æ (–∞–∫–æ –µ –∫–∞—Ñ—è–≤–æ/–æ—Ä–∞–Ω–∂–µ–≤–æ)
–ó–Ω–∞—á–µ–Ω–∏–µ: –¢–æ–∫—Å–∏—á–Ω–æ –Ω–∞—Ç–æ–≤–∞—Ä–≤–∞–Ω–µ –Ω–∞ —á–µ—Ä–Ω–∏—è –¥—Ä–æ–±
```

**–¢–µ–≥–ª–æ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ**: 40%

### 2. AI Prompt Template (Prompt) üé≠

**–†–æ–ª—è**: –î–ò–†–ò–ñ–ò–†–ê –ø—Ä–æ—Ü–µ—Å–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ**:
- **–ï—Ç–∞–ø–∏** - –æ–ø—Ä–µ–¥–µ–ª—è —Ä–µ–¥–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –æ–±—Ä–∞–∑–∞ ‚Üí —Ç—Ä–∏–∞–¥–∞ ‚Üí —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏—è ‚Üí –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è)
- **–ë—Ä–æ–π –∑–∞—è–≤–∫–∏** - —É–∫–∞–∑–≤–∞ –¥–∞–ª–∏ –∞–Ω–∞–ª–∏–∑—ä—Ç –¥–∞ —Å–µ —Ä–∞–∑–¥–µ–ª–∏ –Ω–∞ 2-3 –∑–∞—è–≤–∫–∏ (–∑–∞ –∏–∑–±—è–≥–≤–∞–Ω–µ –Ω–∞ –æ—Ç—Ä—è–∑–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –∏–∑—Ö–æ–¥** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ —Å–ø–æ—Ä–µ–¥ –æ—á–∞–∫–≤–∞–Ω–∏—è—Ç–∞ –Ω–∞ —Ä–µ–ø–æ—Ä—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è** - –∫–∞–∫ –¥–∞ —Å–µ –∫–æ–º–±–∏–Ω–∏—Ä–∞—Ç –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏**:
- –°—ä—Ö—Ä–∞–Ω—è–≤–∞ —Å–µ –≤ KV storage –∫–∞—Ç–æ `ai-prompt-template`
- –ú–æ–∂–µ –¥–∞ —Å–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç Admin –ø–∞–Ω–µ–ª–∞ (—Ç–∞–± "AI Prompt —à–∞–±–ª–æ–Ω")
- –ò–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ `{{variable}}` –∫–æ–∏—Ç–æ —Å–µ –∑–∞–º–µ—Å—Ç–≤–∞—Ç –¥–∏–Ω–∞–º–∏—á–Ω–æ
- Default —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –µ –≤ `prompt.json` –∏ `src/lib/default-prompts.ts`

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏**:
```
{{side}} - –ª—è–≤/–¥–µ—Å–µ–Ω
{{age}} - –≤—ä–∑—Ä–∞—Å—Ç
{{gender}} - –ø–æ–ª
{{bmi}} - –∏–Ω–¥–µ–∫—Å –Ω–∞ —Ç–µ–ª–µ—Å–Ω–∞ –º–∞—Å–∞
{{goals}} - –∑–¥—Ä–∞–≤–Ω–∏ —Ü–µ–ª–∏
{{complaints}} - –æ–ø–ª–∞–∫–≤–∞–Ω–∏—è
{{knowledgeContext}} - —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ
```

**–ü—Ä–∏–º–µ—Ä –∑–∞ –º—É–ª—Ç–∏-–∑–∞—è–≤–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** (–æ—Ç prompt.json):
```
Req1: IMG_QUALITY_CHECK + TOPOGRAPHY_LOCATE + —Å—É—Ä–æ–≤ —Å–ø–∏—Å—ä–∫ –∑–Ω–∞—Ü–∏
Req2: TRIAD_BASE + SIGN_READ + BUILDPROFILE_STEP1 (—Ö–∏–ø–æ—Ç–µ–∑–∏/–æ—Å–∏)
Req3: BUILDPROFILE_STEP2 (—Å–≤–µ—Ä–∫–∞ —Å –≤—ä–ø—Ä–æ—Å–Ω–∏–∫) + —Ñ–∏–Ω–∞–ª–µ–Ω —Å–∏–Ω—Ç–µ–∑
```

**–¢–µ–≥–ª–æ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ**: 30%

### 3. LLM –ó–Ω–∞–Ω–∏—è (LLM Knowledge) üß†

**–†–æ–ª—è**: –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø –∏ –ö–û–†–ï–õ–ê–¶–ò–Ø

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ**:
- **–†–∞–∑—á–∏—Ç–∞–Ω–µ –Ω–∞ –Ω–∞—Ö–æ–¥–∫–∏** - –∫–∞–∫ —Å–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞—Ç –Ω–∞—Ö–æ–¥–∫–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–ö–æ—Ä–µ–ª–∞—Ü–∏—è —Å –¥–∞–Ω–Ω–∏** - —Å–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –Ω–∞—Ö–æ–¥–∫–∏—Ç–µ —Å –¶–Ø–õ–ê–¢–ê –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞:
  - –°–∏–º–ø—Ç–æ–º–∏ –∏ –æ–ø–ª–∞–∫–≤–∞–Ω–∏—è
  - –ó–¥—Ä–∞–≤–Ω–∏ –ø—Ä–æ–±–ª–µ–º–∏
  - –ù–∞—á–∏–Ω –Ω–∞ –∂–∏–≤–æ—Ç
  - –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –Ω–∞–≤–∏—Ü–∏
  - –°—Ç—Ä–µ—Å –∏ —Å—ä–Ω
  - –§–∞–º–∏–ª–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è
  - –ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∏ –∏ –∞–ª–µ—Ä–≥–∏–∏
- **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –∞–Ω–∞—Ç–æ–º–∏—è, —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—è, –ø–∞—Ç–æ—Ñ–∏–∑–∏–æ–ª–æ–≥–∏—è
- **–•–æ–ª–∏—Å—Ç–∏—á–µ–Ω –ø–æ–¥—Ö–æ–¥** - –≤—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω–∏ —Å–∏—Å—Ç–µ–º–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏**:
- –ù–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –ª–æ–∫–∞–ª–Ω–æ - —Ç–æ–≤–∞ —Å–∞ –≤–≥—Ä–∞–¥–µ–Ω–∏—Ç–µ –∑–Ω–∞–Ω–∏—è –Ω–∞ AI –º–æ–¥–µ–ª–∞ (GPT-4, Gemini –∏ –¥—Ä.)
- –í–ª–∏—è–Ω–∏–µ—Ç–æ —Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞ —á—Ä–µ–∑ —Ç–µ–≥–ª–æ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞
- –ü–æ-–≤–∏—Å–æ–∫–æ —Ç–µ–≥–ª–æ = –ø–æ–≤–µ—á–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –æ–±—â–∏—Ç–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –∑–Ω–∞–Ω–∏—è –Ω–∞ AI
- –ü–æ-–Ω–∏—Å–∫–æ —Ç–µ–≥–ª–æ = –ø–æ-—Å—Ç—Ä–æ–≥–æ –ø—Ä–∏–¥—ä—Ä–∂–∞–Ω–µ —Å–∞–º–æ –∫—ä–º —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ

**–ü—Ä–∏–º–µ—Ä**:
–ê–∫–æ –∏–º–∞ –Ω–∞—Ö–æ–¥–∫–∞ –≤ –ø–∞–Ω–∫—Ä–µ–∞—Å–æ–≤–∞—Ç–∞ –∑–æ–Ω–∞ (7:00-8:00) –∏ –∫–ª–∏–µ–Ω—Ç—ä—Ç —Å–ø–æ–º–µ–Ω–∞–≤–∞:
- –£–º–æ—Ä–∞ —Å–ª–µ–¥ —Ö—Ä–∞–Ω–µ–Ω–µ
- –ü—Ä–æ–±–ª–µ–º–∏ —Å –∫—Ä—ä–≤–Ω–∞—Ç–∞ –∑–∞—Ö–∞—Ä
- –ë–∞–±–∞ —Å –¥–∏–∞–±–µ—Ç

LLM –∑–Ω–∞–Ω–∏—è—Ç–∞ –∫–æ—Ä–µ–ª–∏—Ä–∞—Ç —Ç–∞–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞—Ç —á–µ:
- –ò–º–∞ —Ñ–∞–º–∏–ª–Ω–∞ –ø—Ä–µ–¥—Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–æ—Å—Ç
- –°–∏–º–ø—Ç–æ–º–∏—Ç–µ –ø–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞—Ç –Ω–∞—Ö–æ–¥–∫–∏—Ç–µ  
- –ù—É–∂–Ω–∏ —Å–∞ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –∑–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∫—Ä—ä–≤–Ω–∞—Ç–∞ –∑–∞—Ö–∞—Ä

**–¢–µ–≥–ª–æ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ**: 25%

### 4. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¢—ä—Ä—Å–µ–Ω–µ (Web Search) üîç

**–†–æ–ª—è**: –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∞–∫—Ç—É–∞–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª–Ω–æ)

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ**:
- –¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ –Ω–∞–π-–Ω–æ–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ê–∫—Ç—É–∞–ª–Ω–∏ –ø—Ä–æ—É—á–≤–∞–Ω–∏—è
- –ù–æ–≤–∏ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–Ω–∏ –ø–æ–¥—Ö–æ–¥–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏**:
- –ú–æ–∂–µ –¥–∞ —Å–µ –≤–∫–ª—é—á–∏/–∏–∑–∫–ª—é—á–∏ –æ—Ç Admin –ø–∞–Ω–µ–ª–∞
- –í –º–æ–º–µ–Ω—Ç–∞ –ù–ï –ï –ê–ö–¢–ò–í–ù–û –≤ GitHub Spark API
- –ó–∞–±–∞–≤—è –∞–Ω–∞–ª–∏–∑–∞ –∑–Ω–∞—á–∏—Ç–µ–ª–Ω–æ (–∞–∫–æ –µ –∞–∫—Ç–∏–≤–Ω–æ)

**–¢–µ–≥–ª–æ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ**: 5%

## –ö–∞–∫ –†–∞–±–æ—Ç–∏ –ö–æ–º–±–∏–Ω–∞—Ü–∏—è—Ç–∞?

### –ü–æ—Ç–æ–∫ –Ω–∞ –ê–Ω–∞–ª–∏–∑:

```
1. [AI –í–∏–∑–∏—è] –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ –Ω–∞ –∏—Ä–∏—Å–∞
   ‚Üì
2. [–†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ 40%] –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞ –Ω–∞—Ö–æ–¥–∫–∏—Ç–µ:
   - "–í–∏–∂–¥–∞–º —Ç—ä–º–Ω–∞ –ª–∞–∫—É–Ω–∞ –≤ —Å–µ–∫—Ç–æ—Ä 4:00-5:00"
   - "–°–ø–æ—Ä–µ–¥ —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏—è—Ç–∞ —Ç–æ–≤–∞ –µ —á–µ—Ä–µ–Ω –¥—Ä–æ–±"
   - "–¢–∏–ø—ä—Ç –µ –∫—Ä–∏–ø—Ç–∞ ‚Üí —Ö—Ä–æ–Ω–∏—á–Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç"
   ‚Üì
3. [Prompt 30%] –î–∏—Ä–∏–∂–∏—Ä–∞ –ø—Ä–æ—Ü–µ—Å–∞:
   - "–ù–∞–ø—Ä–∞–≤–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—Ä–∞–∑–∞"
   - "–ü—ä—Ä–≤–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ –Ω–∞—Ö–æ–¥–∫–∏"
   - "–°–ª–µ–¥ —Ç–æ–≤–∞ –∫–æ—Ä–µ–ª–∏—Ä–∞–π —Å –¥–∞–Ω–Ω–∏—Ç–µ"
   - "–§–æ—Ä–º–∞—Ç–∏—Ä–∞–π –∫–∞—Ç–æ JSON —Å —Ç–µ–∑–∏ –ø–æ–ª–µ—Ç–∞..."
   ‚Üì
4. [LLM –ó–Ω–∞–Ω–∏—è 25%] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞ –∏ –∫–æ—Ä–µ–ª–∏—Ä–∞:
   - "–ö–ª–∏–µ–Ω—Ç—ä—Ç —Å–ø–æ–º–µ–Ω–∞–≤–∞ —É–º–æ—Ä–∞ –∏ –ø—Ä–æ–±–ª–µ–º–∏ —Å —Ö—Ä–∞–Ω–æ—Å–º–∏–ª–∞–Ω–µ—Ç–æ"
   - "–ò–º–∞ —Ñ–∞–º–∏–ª–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è —Å —á–µ—Ä–Ω–æ–¥—Ä–æ–±–Ω–∏ –ø—Ä–æ–±–ª–µ–º–∏"
   - "–ù–∞—Ö–æ–¥–∫–∞—Ç–∞ + —Å–∏–º–ø—Ç–æ–º–∏ = –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ–±–ª–µ–º (concern)"
   - "–ü—Ä–µ–ø–æ—Ä—ä–∫–∏: –¥–µ—Ç–æ–∫—Å, —Ö–µ–ø–∞—Ç–æ–ø—Ä–æ—Ç–µ–∫—Ç–æ—Ä–∏, –ø—Ä–æ—Ç–∏–≤–æ–≤—ä–∑–ø–∞–ª–∏—Ç–µ–ª–Ω–∞ –¥–∏–µ—Ç–∞"
   ‚Üì
5. [–ò–∑—Ö–æ–¥] –ì–µ–Ω–µ—Ä–∏—Ä–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω –¥–æ–∫–ª–∞–¥
```

### –ü—Ä–∏–º–µ—Ä–Ω–∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

#### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞ (–ú–∞–∫—Å–∏–º–∞–ª–Ω–∞ –¢–æ—á–Ω–æ—Å—Ç):
```
–†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ: 60%  - –°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–∏—á–µ—Å–∫–∞—Ç–∞ –∏—Ä–∏–¥–æ–ª–æ–≥–∏—è
Prompt: 25%       - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ
LLM: 15%          - –ú–∏–Ω–∏–º–∞–ª–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
```
**–ü–æ–¥—Ö–æ–¥—è—â–∞ –∑–∞**: –ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏ –∏—Ä–∏–¥–æ–ª–æ–∑–∏, –Ω–∞—É—á–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è

#### –ë–∞–ª–∞–Ω—Å–∏—Ä–∞–Ω–∞ (–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–∞):
```
–†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ: 40%  - –°–æ–ª–∏–¥–Ω–∞ –±–∞–∑–∞ –æ—Ç –∏—Ä–∏–¥–æ–ª–æ–≥–∏—á–Ω–∏ –∑–Ω–∞–Ω–∏—è
Prompt: 30%       - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω –ø–æ–¥—Ö–æ–¥
LLM: 25%          - –•–æ–ª–∏—Å—Ç–∏—á–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
–¢—ä—Ä—Å–µ–Ω–µ: 5%       - –ê–∫—Ç—É–∞–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```
**–ü–æ–¥—Ö–æ–¥—è—â–∞ –∑–∞**: –ü–æ–≤–µ—á–µ—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—â–∏, –Ω–∞–π-–¥–æ–±—ä—Ä –∫–æ–º–ø—Ä–æ–º–∏—Å

#### –•–æ–ª–∏—Å—Ç–∏—á–Ω–∞ (–®–∏—Ä–æ–∫ –ö–æ–Ω—Ç–µ–∫—Å—Ç):
```
–†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ: 25%  - –ë–∞–∑–∞ –∑–∞ –≤–∏–∑—É–∞–ª–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
Prompt: 30%       - –°–∏–ª–Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
LLM: 40%          - –®–∏—Ä–æ–∫ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
–¢—ä—Ä—Å–µ–Ω–µ: 5%       - –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```
**–ü–æ–¥—Ö–æ–¥—è—â–∞ –∑–∞**: –•–æ–ª–∏—Å—Ç–∏—á–Ω–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ç–∏–≤–Ω–∞ –º–µ–¥–∏—Ü–∏–Ω–∞

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏ –Ω–∞ –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞

### –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞:

```typescript
// –í AnalysisScreen.tsx
const [aiStrategy] = useKVWithFallback<AIModelStrategy>('ai-model-strategy', DEFAULT_STRATEGY)
const [iridologyManual] = useKVWithFallback<IridologyManual>('iridology-manual', {...})
const [aiPromptTemplate] = useKVWithFallback<AIPromptTemplate>('ai-prompt-template', {...})
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –°—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞:

```typescript
// –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –æ—Ç KV storage
const strategy = await window.spark.kv.get<AIModelStrategy>('ai-model-strategy') || aiStrategy
const manual = await window.spark.kv.get<IridologyManual>('iridology-manual') || iridologyManual
const promptTemplate = await window.spark.kv.get<AIPromptTemplate>('ai-prompt-template') || aiPromptTemplate

// –ó–∞–º–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –≤ prompt template
let basePromptContent = promptTemplate?.content || DEFAULT_AI_PROMPT
basePromptContent = basePromptContent
  .replace(/\{\{side\}\}/g, sideName)
  .replace(/\{\{age\}\}/g, String(questionnaire.age))
  .replace(/\{\{knowledgeContext\}\}/g, manualContext)
  // ... –¥—Ä—É–≥–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏

// –ü–æ—Å—Ç—Ä–æ—è–≤–∞–Ω–µ –Ω–∞ —Ñ–∏–Ω–∞–ª–µ–Ω prompt —Å —Ç–µ–≥–ª–∞
const prompt = `‚öôÔ∏è AI –°–¢–†–ê–¢–ï–ì–ò–Ø –ó–ê –ê–ù–ê–õ–ò–ó:
- –ò—Ä–∏–¥–æ–ª–æ–≥–∏—á–Ω–æ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ: ${strategy?.manualWeight}%
- Prompt Template: ${strategy?.promptWeight}%
- LLM –ó–Ω–∞–Ω–∏—è: ${strategy?.llmKnowledgeWeight}%

${basePromptContent}
`
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –æ—Ç Admin –ü–∞–Ω–µ–ª–∞

### 1. AI –ú–æ–¥–µ–ª –°—Ç—Ä–∞—Ç–µ–≥–∏—è (AIModelStrategyTab)
- –°–ª–∞–π–¥—ä—Ä–∏ –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Ç–µ–≥–ª–∞—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –±–∞–ª–∞–Ω—Å–∏—Ä–∞–Ω–µ –¥–æ 100%
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–∞ –º–æ–¥–µ–ª–∞ (temperature, max tokens, top P)
- –î–µ—Ç–∞–π–ª–Ω–∏ –æ–±—è—Å–Ω–µ–Ω–∏—è –∑–∞ –≤—Å–µ–∫–∏ –∏–∑—Ç–æ—á–Ω–∏–∫

### 2. –ò—Ä–∏–¥–æ–ª–æ–≥–∏—á–Ω–æ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ (IridologyManualTab)
- –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ
- –í—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –¥–æ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- –ü–æ–∫–∞–∑–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∞ –ø—Ä–æ–º—è–Ω–∞

### 3. AI Prompt –®–∞–±–ª–æ–Ω (AIPromptTab)
- –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ prompt template
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏—Ç–µ
- –í—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –¥–æ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- –ü–æ–∫–∞–∑–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∞ –ø—Ä–æ–º—è–Ω–∞

## –§–∞–π–ª–æ–≤–µ –≤ –ü—Ä–æ–µ–∫—Ç–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∏:
- `manual.json` - Default —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ (—Ç–µ–∫—É—â–æ –≤ compact —Ñ–æ—Ä–º–∞—Ç)
- `prompt.json` - Default —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ prompt template (—Ç–µ–∫—É—â–æ —Å –º—É–ª—Ç–∏-–∑–∞—è–≤–∫–∞ –ª–æ–≥–∏–∫–∞)
- `src/lib/default-prompts.ts` - TypeScript –≤–µ—Ä—Å–∏–∏ –Ω–∞ defaults

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- `src/components/admin/AIModelStrategyTab.tsx` - UI –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞
- `src/components/admin/IridologyManualTab.tsx` - UI –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ
- `src/components/admin/AIPromptTab.tsx` - UI –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ prompt template
- `src/components/screens/AnalysisScreen.tsx` - –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –∞–Ω–∞–ª–∏–∑

### –¢–∏–ø–æ–≤–µ:
- `src/types/index.ts` - TypeScript –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –∑–∞ AIModelStrategy, IridologyManual, AIPromptTemplate

## –í–∞–∂–Ω–∏ –ë–µ–ª–µ–∂–∫–∏

1. **RAG –±–µ–∑ –±–µ–∫–µ–Ω–¥**: –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ—Ç–æ —Ä–∞–±–æ—Ç–∏ –∏–∑—Ü—è–ª–æ –Ω–∞ frontend —á—Ä–µ–∑ KV storage –Ω–∞ GitHub Spark
2. **–î–∏–Ω–∞–º–∏—á–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ**: –í—Å–∏—á–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç –Ω–∞ –∞–Ω–∞–ª–∏–∑–∞
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –û–±—â–∞—Ç–∞ —Å—É–º–∞ –Ω–∞ —Ç–µ–≥–ª–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ —Ç–æ—á–Ω–æ 100%
4. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç**: –ü—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –≤ KV storage –∏ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –º–µ–∂–¥—É —Å–µ—Å–∏–∏
5. **Fallback**: –ê–∫–æ KV storage –Ω–µ –µ –Ω–∞–ª–∏—á–µ–Ω, –∏–∑–ø–æ–ª–∑–≤–∞—Ç —Å–µ default —Å—Ç–æ–π–Ω–æ—Å—Ç–∏

## –¢–µ—Å—Ç–≤–∞–Ω–µ

–ó–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

1. –û—Ç–∏–¥–µ—Ç–µ –≤ Admin –ø–∞–Ω–µ–ª ‚Üí AI –ú–æ–¥–µ–ª –°—Ç—Ä–∞—Ç–µ–≥–∏—è
2. –ü—Ä–æ–º–µ–Ω–µ—Ç–µ —Ç–µ–≥–ª–∞—Ç–∞ —Å–ø–æ—Ä–µ–¥ –∂–µ–ª–∞–Ω–∏—è—Ç–∞
3. –ó–∞–ø–∞–∑–µ—Ç–µ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ
4. –ù–∞–ø—Ä–∞–≤–µ—Ç–µ –Ω–æ–≤ –∞–Ω–∞–ª–∏–∑
5. –°—Ä–∞–≤–Ω–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤–∞—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —è—Å–Ω–æ —Ä–∞–∑–¥–µ–ª—è —Ä–æ–ª–∏—Ç–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏—Ç–µ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏:
- **Manual** = –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ö–™–ê, –ö–ê–ö–í–û, –ó–ù–ê–ß–ï–ù–ò–ï)
- **Prompt** = –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (–ö–ê–ö, –ö–û–ì–ê, –°–¢–†–£–ö–¢–£–†–ê)
- **LLM** = –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –ö–æ—Ä–µ–ª–∞—Ü–∏—è (–ó–ê–©–û, –ö–û–ù–¢–ï–ö–°–¢, –í–†–™–ó–ö–ò)

–¢–æ–≤–∞ –ø–æ–∑–≤–æ–ª—è–≤–∞ –≥—ä–≤–∫–∞–≤–æ –Ω–∞—Å—Ç—Ä–æ–π–≤–∞–Ω–µ —Å–ø–æ—Ä–µ–¥ –Ω—É–∂–¥–∏—Ç–µ –∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏—è—Ç–∞ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—â–∏.
