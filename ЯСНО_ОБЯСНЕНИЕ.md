# üîç –Ø–°–ù–û –û–ë–Ø–°–ù–ï–ù–ò–ï - –ó–ê–©–û –ö–ê–ß–í–ê–ù–ï–¢–û –ù–ï –†–ê–ë–û–¢–ò

## ‚ùå –ü–†–û–ë–õ–ï–ú–™–¢

–°–ª–µ–¥ **6 –∏—Ç–µ—Ä–∞—Ü–∏–∏** –Ω–∞ "–ø–æ–ø—Ä–∞–≤–∫–∏", –∫–∞—á–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è **–í–°–ï –û–©–ï –ù–ï –†–ê–ë–û–¢–ò**.

## üéØ –ó–ê–©–û?

### –ü—Ä–∏—á–∏–Ω–∞ 1: –†–ï–ê–õ–ù–ò–Ø–¢ –ü–†–û–ë–õ–ï–ú –ù–ï –ï –ù–ê–ú–ï–†–ï–ù

–î–æ—Å–µ–≥–∞ —Å–∞ –ø—Ä–∞–≤–µ–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏ –∫–æ–∏—Ç–æ **–ù–ï –°–ê –ê–î–†–ï–°–ò–†–ê–õ–ò** –∏—Å—Ç–∏–Ω—Å–∫–∏—è –ø—Ä–æ–±–ª–µ–º:

1. ‚úÖ useState ‚Üí useRef (**–ü–†–ê–í–ò–õ–ù–ê –ø—Ä–æ–º—è–Ω–∞**, –Ω–æ –Ω–µ –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∏—è—Ç –ø—Ä–æ–±–ª–µ–º)
2. ‚úÖ –ö–æ–º–ø—Ä–µ—Å–∏—è –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (**–ü–†–ê–í–ò–õ–ù–ê –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**)
3. ‚úÖ Validation –ª–æ–≥–∏–∫–∞ (**–ü–†–ê–í–ò–õ–ù–ê –ø—Ä–æ–≤–µ—Ä–∫–∞**)
4. ‚úÖ Error logging (**–ü–†–ê–í–ò–õ–ï–ù debugging**)

**–ù–û**: –ê–∫–æ –≤—Å–∏—á–∫–æ —Ç–æ–≤–∞ –µ "–ø—Ä–∞–≤–∏–ª–Ω–æ", –∑–∞—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏?

### –ü—Ä–∏—á–∏–Ω–∞ 2: –õ–ò–ü–°–í–ê –Ø–°–ù–ê –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–î–æ —Ç–æ–∑–∏ –º–æ–º–µ–Ω—Ç **–ù–ï –ï –Ø–°–ù–û**:
- –ù–∞ –∫–æ–π **–¢–û–ß–ù–û** –µ—Ç–∞–ø —Ñ–µ–π–ª–≤–∞ –∫–∞—á–≤–∞–Ω–µ—Ç–æ
- **–ö–ê–ö–í–ò** –≥—Ä–µ—à–∫–∏ —Å–µ –ø–æ—è–≤—è–≤–∞—Ç –≤ console
- **–î–ê–õ–ò** FileReader —É—Å–ø—è–≤–∞ –¥–∞ –ø—Ä–æ—á–µ—Ç–µ —Ñ–∞–π–ª–∞
- **–î–ê–õ–ò** Canvas —É—Å–ø—è–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ dataURL
- **–î–ê–õ–ò** IrisCropEditor –ø–æ–ª—É—á–∞–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
- **–î–ê–õ–ò** handleCropSave –∑–∞–ø–∞–∑–≤–∞ –≤ ref-–æ–≤–µ—Ç–µ
- **–î–ê–õ–ò** handleNext –∏–∑–≤–∏–∫–≤–∞ onComplete()
- **–î–ê–õ–ò** App.tsx –ø–æ–ª—É—á–∞–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ

**–ë–ï–ó –¢–ê–ó–ò –ò–ù–§–û–†–ú–ê–¶–ò–Ø**: –ü—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞ "—Å–ª–µ–ø–∏" –∏ –Ω–µ —Ü–µ–ª—è—Ç –∏—Å—Ç–∏–Ω—Å–∫–∏—è –ø—Ä–æ–±–ª–µ–º!

## üìã –ö–ê–ö–í–û –ù–ê–ü–†–ê–í–ò–• –°–ï–ì–ê

### 1. –°—ä–∑–¥–∞–¥–æ—Ö **Upload Diagnostics System**

–ù–æ–≤ —Ñ–∞–π–ª: `/src/lib/upload-diagnostics.ts`

**–ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏:**
- –ó–∞–ø–∏—Å–≤–∞ **–í–°–Ø–ö–ê –°–¢–™–ü–ö–ê** –æ—Ç upload –ø—Ä–æ—Ü–µ—Å–∞
- –ó–∞–ø–∏—Å–≤–∞ **–í–°–Ø–ö–ê –ì–†–ï–®–ö–ê** —Å –¥–µ—Ç–∞–π–ª–∏
- –ü–æ–∫–∞–∑–≤–∞ **–¢–û–ß–ù–û –ö–™–î–ï** —Ñ–µ–π–ª–≤–∞
- –ü–æ–∑–≤–æ–ª—è–≤–∞ **–ò–ó–¢–ï–ì–õ–Ø–ù–ï** –Ω–∞ –ø—ä–ª–µ–Ω diagnostic report

**–ü—Ä–∏–º–µ—Ä–µ–Ω –ª–æ–≥:**
```
üöÄ [UPLOAD_DIAG] [SESSION_START]
üöÄ [UPLOAD_DIAG] [FILE_SELECT_START] { side: 'left', fileName: 'iris.jpg', fileSize: 123456 }
‚ÑπÔ∏è [UPLOAD_DIAG] [FILE_READER_CREATED]
üöÄ [UPLOAD_DIAG] [FILE_READER_READ_START] { side: 'left', fileName: 'iris.jpg' }
üöÄ [UPLOAD_DIAG] [FILE_READER_ONLOAD]
‚úÖ [UPLOAD_DIAG] [FILE_READER_SUCCESS] { dataUrlSizeKB: 456 }
üöÄ [UPLOAD_DIAG] [COMPRESS_START_1ST_PASS]
‚úÖ [UPLOAD_DIAG] [COMPRESS_END_1ST_PASS] { compressedSizeKB: 123 }
‚úÖ [UPLOAD_DIAG] [OPEN_CROP_EDITOR]
...
‚ùå [UPLOAD_DIAG] [CROP_SAVE_ERROR] { error: "..." }
```

### 2. –î–æ–±–∞–≤–∏—Ö –¥–µ—Ç–∞–π–ª–Ω–æ logging –Ω–∞ **–í–°–Ø–ö–ê –°–¢–™–ü–ö–ê**

- **ImageUploadScreen.tsx**: handleFileSelect, handleCropSave, handleNext
- **App.tsx**: handleImagesComplete
- **–í—Å—è–∫–∞ —Å—Ç—ä–ø–∫–∞** –∑–∞–ø–∏—Å–≤–∞:
  - Input –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
  - –ú–µ–∂–¥–∏–Ω–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
  - Output —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
  - –ì—Ä–µ—à–∫–∏ (–∞–∫–æ –∏–º–∞)

### 3. –î–æ–±–∞–≤–∏—Ö –±—É—Ç–æ–Ω –∑–∞ –∏–∑—Ç–µ–≥–ª—è–Ω–µ –Ω–∞ diagnostic report

–í **QuickDebugPanel** –∏–º–∞ –Ω–æ–≤ –±—É—Ç–æ–Ω:
- **"–ò–∑—Ç–µ–≥–ª–∏ Upload Diagnostics"**
- –ò–∑—Ç–µ–≥–ª—è `.txt` —Ñ–∞–π–ª —Å **–ü–™–õ–ù–ê –ò–°–¢–û–†–ò–Ø** –Ω–∞ upload –ø—Ä–æ—Ü–µ—Å–∞
- –ü–æ–∫–∞–∑–≤–∞ **–í–°–ò–ß–ö–ò** events, –≥—Ä–µ—à–∫–∏, –∏ warnings

## üéØ –ö–ê–ö–í–û –¢–†–Ø–ë–í–ê –î–ê –ù–ê–ü–†–ê–í–ò–®

### –°—Ç—ä–ø–∫–∞ 1: –û–ø–∏—Ç–∞–π –¥–∞ –∫–∞—á–∏—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

1. –û—Ç–≤–æ—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
2. –ó–∞–ø–æ—á–Ω–∏ –Ω–æ–≤ –∞–Ω–∞–ª–∏–∑
3. –ü–æ–ø—ä–ª–Ω–∏ –≤—ä–ø—Ä–æ—Å–Ω–∏–∫–∞
4. –û–ø–∏—Ç–∞–π –¥–∞ –∫–∞—á–∏—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ª—è–≤ –∏–ª–∏ –¥–µ—Å–µ–Ω –∏—Ä–∏—Å)

### –°—Ç—ä–ø–∫–∞ 2: –í–∏–∂ console-–∞

–û—Ç–≤–æ—Ä–∏ **Browser DevTools** (F12) ‚Üí **Console** tab

**–í–∏–∂:**
- –ò–º–∞ –ª–∏ —á–µ—Ä–≤–µ–Ω–∏ –≥—Ä–µ—à–∫–∏ (**‚ùå**)?
- –ò–º–∞ –ª–∏ –∂—ä–ª—Ç–∏ warnings (**‚ö†Ô∏è**)?
- –ö—ä–¥–µ —Å–ø–∏—Ä–∞ –ª–æ–≥–≤–∞–Ω–µ—Ç–æ?

### –°—Ç—ä–ø–∫–∞ 3: –ò–∑—Ç–µ–≥–ª–∏ diagnostic report

1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ **–∂—ä–ª—Ç–æ—Ç–æ –±—ä–≥—á–µ** –¥–æ–ª—É –≤ –¥—è—Å–Ω–æ
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ **"–ò–∑—Ç–µ–≥–ª–∏ Upload Diagnostics"**
3. –ò–∑–ø—Ä–∞—Ç–∏ –º–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏—è —Ñ–∞–π–ª

### –°—Ç—ä–ø–∫–∞ 4: –û—Ç–≥–æ–≤–æ—Ä–∏ –Ω–∞ —Ç–µ–∑–∏ –≤—ä–ø—Ä–æ—Å–∏

1. **–ö–æ–≥–∞ —Ç–æ—á–Ω–æ —Ñ–µ–π–ª–≤–∞?**
   - –ü—Ä–∏ –∏–∑–±–æ—Ä –Ω–∞ —Ñ–∞–π–ª?
   - –ü—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞?
   - –ü—Ä–∏ –∫–æ–º–ø—Ä–µ—Å–∏—è?
   - –ü—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ crop editor?
   - –ü—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ —Å–ª–µ–¥ crop?
   - –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–µ –Ω–∞ "–ó–∞–ø–æ—á–Ω–∏ –∞–Ω–∞–ª–∏–∑"?
   - –°–ª–µ–¥ —Ç–æ–≤–∞?

2. **–ö–∞–∫–≤–æ —Ç–æ—á–Ω–æ —Å–µ —Å–ª—É—á–≤–∞?**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∫—Ä–∞—à–≤–∞?
   - –ü—Ä–æ—Å—Ç–æ –Ω–µ —Å–µ —Å–ª—É—á–≤–∞ –Ω–∏—â–æ?
   - –ü–æ–∫–∞–∑–≤–∞ —Å–µ –≥—Ä–µ—à–∫–∞?
   - –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞ —Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞?

3. **–ö–∞–∫–≤–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–±–≤–∞—à?**
   - –†–∞–∑–º–µ—Ä –Ω–∞ —Ñ–∞–π–ª–∞?
   - –§–æ—Ä–º–∞—Ç (JPEG, PNG, WebP)?
   - –û—Ç–∫—ä–¥–µ –µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ (—Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ–º–ø—é—Ç—ä—Ä, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)?

4. **–ö–∞–∫—ä–≤ –±—Ä–∞—É–∑—ä—Ä –∏–∑–ø–æ–ª–∑–≤–∞—à?**
   - Chrome / Edge / Firefox / Safari?
   - Desktop / Mobile?
   - –í–µ—Ä—Å–∏—è?

5. **–ò–º–∞ –ª–∏ –≥—Ä–µ—à–∫–∏ –≤ console?**
   - –ß–µ—Ä–≤–µ–Ω–∏ –≥—Ä–µ—à–∫–∏?
   - –ö–∞–∫—ä–≤ –µ —Ç–µ–∫—Å—Ç—ä—Ç?
   - –ù–∞ –∫–æ–π —Ä–µ–¥ –µ –≥—Ä–µ—à–∫–∞—Ç–∞?

## üö® –í–ê–ñ–ù–û

**–ù–ï –ú–û–ì–ê –î–ê –ü–û–ü–†–ê–í–Ø –ü–†–û–ë–õ–ï–ú, –ö–û–ô–¢–û –ù–ï –í–ò–ñ–î–ê–ú!**

–î–æ —Ç–æ–∑–∏ –º–æ–º–µ–Ω—Ç –ø—Ä–∞–≤–∏—Ö "—Å–ª–µ–ø–∏" –ø—Ä–æ–º–µ–Ω–∏, –∑–∞—â–æ—Ç–æ:
- –ù—è–º–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∫–æ–≥–∞ —Ç–æ—á–Ω–æ —Ñ–µ–π–ª–≤–∞
- –ù—è–º–∞–º console logs
- –ù—è–º–∞–º diagnostic data
- –ù—è–º–∞–º error messages

**–°–ï–ì–ê** –∏–º–∞—à **–ü–™–õ–ù–ê –î–ò–ê–ì–ù–û–°–¢–ò–ß–ù–ê –°–ò–°–¢–ï–ú–ê** –∫–æ—è—Ç–æ —â–µ –ø–æ–∫–∞–∂–µ **–¢–û–ß–ù–û** –∫—ä–¥–µ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç!

## üìä –°–õ–ï–î–í–ê–©–ò –°–¢–™–ü–ö–ò

1. **–¢–ò**: –ü—Ä–æ–±–≤–∞–π –¥–∞ –∫–∞—á–∏—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. **–¢–ò**: –í–∏–∂ console-–∞ –∏ diagnostic report
3. **–¢–ò**: –ò–∑–ø—Ä–∞—Ç–∏ –º–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞
4. **–ê–ó**: –©–µ –≤–∏–¥—è –¢–û–ß–ù–û –∫—ä–¥–µ —Ñ–µ–π–ª–≤–∞
5. **–ê–ó**: –©–µ –ø–æ–ø—Ä–∞–≤—è –†–ï–ê–õ–ù–ò–Ø –ø—Ä–æ–±–ª–µ–º (–Ω–µ —Å–ª–µ–ø–∏ –ø—Ä–æ–º–µ–Ω–∏)
6. **–†–ï–∑—É–ª—Ç–∞—Ç**: –ö–∞—á–≤–∞–Ω–µ—Ç–æ —â–µ —Ä–∞–±–æ—Ç–∏!

## üéì –ü–û–£–ö–ê

**Debugging –ë–ï–ó –¥–∞–Ω–Ω–∏ = –°—Ç—Ä–µ–ª–±–∞ –≤ —Ç—ä–º–Ω–æ—Ç–æ**

–ú–æ–∂–µ—Ö –¥–∞ –ø—Ä–∞–≤—è –æ—â–µ 100 "—Å–ª–µ–ø–∏" –ø—Ä–æ–º–µ–Ω–∏, –Ω–æ:
- –ë–ï–ó –¥–∞ –∑–Ω–∞–º –∫—ä–¥–µ —Ñ–µ–π–ª–≤–∞
- –ë–ï–ó –¥–∞ –≤–∏–¥—è –≥—Ä–µ—à–∫–∏—Ç–µ
- –ë–ï–ó diagnostic data

... –ø—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞ **–°–õ–£–ß–ê–ô–ù–ò** –∏ **–ë–ï–ó–ü–û–õ–ï–ó–ù–ò**!

**–°–ï–ì–ê** –∏–º–∞—à –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ç–µ –¥–∞ –º–∏ –ø–æ–∫–∞–∂–µ—à **–¢–û–ß–ù–û** –∫—ä–¥–µ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç!

---

**–ò–∑–ø–æ–ª–∑–≤–∞–π diagnostic —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∏ –∏–∑–ø—Ä–∞—Ç–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ!**
